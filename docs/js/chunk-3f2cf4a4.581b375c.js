(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f2cf4a4"],{"2d3b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-card",[a("b-card-title",[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("i",{staticClass:"fa fa-search text-secondary"}),t._v(" 关于 "),a("span",{staticClass:"text-success"},[t._v(t._s(t.q))]),t._v(" 的搜索结果 共 "+t._s(this.articles.length)+" 条 ")]),a("b-col",[a("b-button",{staticClass:"mr-2",attrs:{pressed:"relative"===t.sort,variant:"outline-secondary"},on:{click:function(e){"relative"===t.sort?t.sort="":t.sort="relative",t.sortSearch()}}},[a("i",{staticClass:"fa fa-random mr-1"}),t._v(" 相关性排序 ")]),a("b-button",{attrs:{pressed:"like"===t.sort,variant:"outline-secondary"},on:{click:function(e){"like"===t.sort?t.sort="":t.sort="like",t.sortSearch()}}},[a("i",{staticClass:"fa fa-thumbs-up mr-1"}),t._v(" 点赞排序 ")])],1)],1)],1),a("hr"),a("article-list",{attrs:{isSearch:"",id:"article-list",articles:t.pageData}}),a("div",{staticClass:"mt-4"},[t.havePageData?a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},on:{change:t.onPageChange},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):a("h3",{staticClass:"text-center"},[a("i",{staticClass:"far fa-grimace"}),t._v(" 暂无数据 ")])],1)],1)],1)},r=[],i=a("f4b7"),o=a("6009"),n={data:function(){return{articles:[],q:"",sort:""}},computed:{},mixins:[o["a"]],components:{ArticleList:i["a"]},created:function(){this.q=this.$route.query.q,this.$store.commit("updateSearchVal",this.q),this.fetchArticles(this.q)},beforeRouteUpdate:function(t,e,a){this.$store.commit("updateSearchVal",t.query.q),this.q=t.query.q,this.fetchArticles(t.query.q),this.sort="",a()},methods:{fetchArticles:function(t,e){this.articles=this.$store.getters.getArticleByKeyword(t,e),this.setPageSource(this.articles)},onPageChange:function(){this.$nextTick((function(){document.querySelector("#article-list").scrollIntoView()}))},sortSearch:function(){this.resetPage(),this.fetchArticles(this.q,this.sort)}}},c=n,l=a("2877"),u=Object(l["a"])(c,s,r,!1,null,null,null);e["default"]=u.exports},6009:function(t,e,a){"use strict";a("fb6a");var s=a("2ef0"),r=a.n(s);e["a"]={data:function(){return{perPage:10,currentPage:1,pageSourceData:[]}},computed:{rows:function(){return this.pageSourceData.length},pageData:function(){var t=(this.currentPage-1)*this.perPage,e=t+this.perPage;return r.a.slice(this.pageSourceData,t,e)},havePageData:function(){return!r.a.isEmpty(this.pageSourceData)}},methods:{setPageSource:function(t){this.pageSourceData=t},resetPage:function(){this.currentPage=1}}}},"6ba5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v(t._s(t.fromNow))])},r=[],i=a("c1df"),o=a.n(i),n={props:{dateTime:String},computed:{fromNow:function(){return o()(this.dateTime).locale("zh-CN").fromNow()}}},c=n,l=a("2877"),u=Object(l["a"])(c,s,r,!1,null,null,null);e["a"]=u.exports},f4b7:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-list-group",{attrs:{flush:""}},t._l(t.articles,(function(e){return a("b-list-group-item",{key:e.id},[a("b-avatar",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:e.user.name,expression:"article.user.name",modifiers:{hover:!0,top:!0}}],staticClass:"mr-2",attrs:{size:"sm",src:e.user.avatar}}),a("b-link",{staticClass:"text-secondary text-decoration-none",attrs:{to:{name:"articles.show",params:{userId:e.user_id,id:e.id}}}},[t.isSearch?a("span",{domProps:{innerHTML:t._s(e.title)}}):a("span",[t._v(t._s(e.title))])]),a("small",{staticClass:"float-right text-secondary"},[a("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"点赞数",expression:"`点赞数`",modifiers:{hover:!0,top:!0}}]},[a("i",{staticClass:"fa fa-thumbs-o-up"}),t._v(" "+t._s(e.likeUsers?e.likeUsers.length:0)+" ")]),t._v(" • "),a("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"评论数",expression:"`评论数`",modifiers:{hover:!0,top:!0}}]},[a("i",{staticClass:"fa fa-comment-o"}),t._v(" "+t._s(e.comments?e.comments.length:0)+" ")]),t._v(" • "),a("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"分类",expression:"`分类`",modifiers:{hover:!0,top:!0}}]},[a("b-link",{staticClass:"text-secondary",attrs:{to:{name:"category",params:{categoryId:e.category_id}}}},[a("i",{staticClass:"far fa-folder"}),t._v(" "+t._s(e.category.name)+" ")])],1),t._v(" • "),a("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:e.updated_at,expression:"article.updated_at",modifiers:{hover:!0,top:!0}}]},[a("i",{staticClass:"fa fa-clock-o"}),t._v(" "),a("date",{attrs:{"date-time":e.updated_at}})],1)]),t.isSearch?a("p",{staticClass:"my-2",domProps:{innerHTML:t._s(e.summary)}}):t._e()],1)})),1)},r=[],i=a("6ba5"),o={props:{articles:Array,isSearch:Boolean},data:function(){return{}},computed:{},components:{Date:i["a"]},methods:{},created:function(){}},n=o,c=a("2877"),l=Object(c["a"])(n,s,r,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-3f2cf4a4.581b375c.js.map